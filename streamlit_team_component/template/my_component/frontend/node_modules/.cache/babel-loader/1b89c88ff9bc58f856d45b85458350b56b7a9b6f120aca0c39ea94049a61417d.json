{"ast":null,"code":"import _objectSpread from\"C:/Users/hause/OneDrive/01_Studium/02_Master/05_Masterarbeit/03_FootballAI-UI/streamlit_team_component/template/my_component/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{Streamlit,withStreamlitConnection}from\"streamlit-component-lib\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyComponent=_ref=>{var _args$image;let{args}=_ref;const[assignments,setAssignments]=useState(()=>args.assignments||{});// üì¶ Synchronisiere neue Props von Streamlit in state\nuseEffect(()=>{setAssignments(args.assignments||{});},[args.assignments]);useEffect(()=>{Streamlit.setFrameHeight();},[assignments,args.image,args.players]);// üñ±Ô∏è Klick-Handler f√ºr Bounding Boxes\nconst onBoxClick=(id,shiftKey)=>{const current=assignments[id]||{team:\"1\",removed:false};const updated=_objectSpread(_objectSpread({},assignments),{},{[id]:shiftKey?_objectSpread(_objectSpread({},current),{},{removed:!current.removed}):{team:current.team===\"1\"?\"2\":\"1\",removed:false}});console.log(\"üß™ Updated:\",updated);setAssignments(updated);Streamlit.setComponentValue(updated);};// üß™ Debug sichtbar machen\nconsole.log(\"üì∏ Bildl√§nge:\",(_args$image=args.image)===null||_args$image===void 0?void 0:_args$image.length);console.log(\"üë• Spieler:\",args.players);console.log(\"üì¶ Assignments:\",assignments);// ‚ùó Wichtige Pr√ºfung: Daten √ºberhaupt da?\nif(!args.image||!args.players||!args.colors){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u26D4 Keine Daten empfangen.\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",display:\"inline-block\",width:\"800px\",// üëà unbedingt hinzuf√ºgen\nborder:\"2px dashed green\"},children:[/*#__PURE__*/_jsx(\"img\",{src:\"data:image/png;base64,\".concat(args.image),alt:\"Frame\",style:{display:\"block\",width:\"100%\",// f√ºllt Wrapper\nheight:\"auto\",border:\"1px solid red\"}}),args.players.map(player=>{const a=assignments[player.id]||{team:\"1\",removed:false};const color=a.removed?args.colors.removed:args.colors[a.team];const[x1,y1,x2,y2]=player.bbox;return/*#__PURE__*/_jsx(\"div\",{onClick:e=>onBoxClick(player.id,e.shiftKey),style:{position:\"absolute\",top:\"\".concat(y1,\"px\"),left:\"\".concat(x1,\"px\"),width:\"\".concat(x2-x1,\"px\"),height:\"\".concat(y2-y1,\"px\"),border:\"2px solid \".concat(color),boxSizing:\"border-box\",cursor:\"pointer\",zIndex:10}},player.id);})]});};export default withStreamlitConnection(MyComponent);","map":{"version":3,"names":["React","useEffect","useState","Streamlit","withStreamlitConnection","jsx","_jsx","jsxs","_jsxs","MyComponent","_ref","_args$image","args","assignments","setAssignments","setFrameHeight","image","players","onBoxClick","id","shiftKey","current","team","removed","updated","_objectSpread","console","log","setComponentValue","length","colors","children","style","position","display","width","border","src","concat","alt","height","map","player","a","color","x1","y1","x2","y2","bbox","onClick","e","top","left","boxSizing","cursor","zIndex"],"sources":["C:/Users/hause/OneDrive/01_Studium/02_Master/05_Masterarbeit/03_FootballAI-UI/streamlit_team_component/template/my_component/frontend/src/MyComponent.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport {\r\n  Streamlit,\r\n  withStreamlitConnection,\r\n  ComponentProps,\r\n} from \"streamlit-component-lib\"\r\n\r\ninterface Player {\r\n  id: string\r\n  bbox: [number, number, number, number]\r\n}\r\n\r\ninterface Props extends ComponentProps {\r\n  args: {\r\n    image: string\r\n    players: Player[]\r\n    assignments: Record<string, { team: \"1\" | \"2\"; removed: boolean }>\r\n    colors: { \"1\": string; \"2\": string; removed: string }\r\n  }\r\n}\r\n\r\nconst MyComponent = ({ args }: Props) => {\r\n  const [assignments, setAssignments] = useState<Record<\r\n    string,\r\n    { team: \"1\" | \"2\"; removed: boolean }\r\n  >>(() => args.assignments || {})\r\n\r\n  // üì¶ Synchronisiere neue Props von Streamlit in state\r\n  useEffect(() => {\r\n    setAssignments(args.assignments || {})\r\n  }, [args.assignments])\r\n  useEffect(() => {\r\n    Streamlit.setFrameHeight() \r\n  }, [assignments, args.image, args.players])\r\n  // üñ±Ô∏è Klick-Handler f√ºr Bounding Boxes\r\n  const onBoxClick = (id: string, shiftKey: boolean) => {\r\n    const current = assignments[id] || { team: \"1\", removed: false }\r\n\r\n    const updated: Record<string, { team: \"1\" | \"2\"; removed: boolean }> = {\r\n      ...assignments,\r\n      [id]: shiftKey\r\n        ? { ...current, removed: !current.removed }\r\n        : {\r\n            team: current.team === \"1\" ? \"2\" : \"1\",\r\n            removed: false,\r\n          },\r\n    }\r\n\r\n    console.log(\"üß™ Updated:\", updated)\r\n\r\n    setAssignments(updated)\r\n    Streamlit.setComponentValue(updated)\r\n  }\r\n\r\n  // üß™ Debug sichtbar machen\r\n  console.log(\"üì∏ Bildl√§nge:\", args.image?.length)\r\n  console.log(\"üë• Spieler:\", args.players)\r\n  console.log(\"üì¶ Assignments:\", assignments)\r\n\r\n  // ‚ùó Wichtige Pr√ºfung: Daten √ºberhaupt da?\r\nif (!args.image || !args.players || !args.colors) {\r\n  return <div>‚õî Keine Daten empfangen.</div>\r\n}\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          position: \"relative\",\r\n          display: \"inline-block\",\r\n          width: \"800px\", // üëà unbedingt hinzuf√ºgen\r\n          border: \"2px dashed green\"\r\n        }}\r\n      >\r\n        <img\r\n          src={`data:image/png;base64,${args.image}`}\r\n          alt=\"Frame\"\r\n          style={{\r\n            display: \"block\",\r\n            width: \"100%\",   // f√ºllt Wrapper\r\n            height: \"auto\",\r\n            border: \"1px solid red\"\r\n          }}\r\n        />\r\n\r\n    {args.players.map((player) => {\r\n      const a = assignments[player.id] || { team: \"1\", removed: false }\r\n      const color = a.removed ? args.colors.removed : args.colors[a.team]\r\n      const [x1, y1, x2, y2] = player.bbox\r\n      return (\r\n        <div\r\n          key={player.id}\r\n          onClick={(e) => onBoxClick(player.id, e.shiftKey)}\r\n          style={{\r\n            position: \"absolute\",\r\n            top: `${y1}px`,\r\n            left: `${x1}px`,\r\n            width: `${x2 - x1}px`,\r\n            height: `${y2 - y1}px`,\r\n            border: `2px solid ${color}`,\r\n            boxSizing: \"border-box\",\r\n            cursor: \"pointer\",\r\n            zIndex: 10\r\n          }}\r\n        />\r\n      )\r\n    })}\r\n  </div>\r\n)\r\n}\r\n\r\nexport default withStreamlitConnection(MyComponent)\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}